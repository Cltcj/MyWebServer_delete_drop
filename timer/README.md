# 定时器

网络程序需要处理的第三类事件是定时事件，比如定期检测一个客户连接的活动状态。

由alarm和setitimer函数设置的实时闹钟一旦超时，将触发SIGALRM信号。因为，我们可以利用该信号的信号处理函数来处理定时任务。但是，如果要处理多个定时任务，我们就需要不断地触发SIGALRM信号，并在其信号处理函数中执行到期的任务。

## 基于升序链表的定时器

&emsp;&emsp;定时器通常至少要包含两个成员：一个超时时间（相对或者绝对时间）和一个任务回调函数。有的时候还可能包含回调函数。有的时候还可能包含回调函数被执行时需要传入的参数，以及是否重启定时器等信息。如果使用链表作为容器来串联所有的定时器，则每个定时器还要包含指向下一个定时器的指针成员。

定时器处理非活动连接
===============
由于非活跃连接占用了连接资源，严重影响服务器的性能，通过实现一个服务器定时器，处理这种非活跃连接，释放连接资源。利用alarm函数周期性地触发SIGALRM信号,该信号的信号处理函数利用管道通知主循环执行定时器链表上的定时任务.
> * 统一事件源
> * 基于升序链表的定时器
> * 处理非活动连接
